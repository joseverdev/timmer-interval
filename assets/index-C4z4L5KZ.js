(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const U={$setsInput:document.getElementById("sets"),$worksSecondsInput:document.getElementById("work-input"),$workMinutesInput:document.getElementById("work-minutes-input"),$restMinutesInput:document.getElementById("rest-minutes-input"),$restSecondsInput:document.getElementById("rest-seconds-input"),$configDiv:document.querySelector(".config"),$preparationDiv:document.querySelector(".preparation"),$preparationText:document.getElementById("preparation__text"),$preparationTimmer:document.getElementById("preparation__timmer"),$countDiv:document.getElementById("count"),$countTitle:document.getElementById("count__title"),$countTimmer:document.getElementById("count__timmer"),$countSets:document.getElementById("count__sets"),$exitBtn:document.getElementById("exit")};class H{sounds={};baseUrl="/timmer-interval";constructor(){this.loadSounds()}loadSounds(){const t=n=>`${this.baseUrl}/sounds/${n}`.replace(/\/+/g,"/");this.sounds={beep:new Audio(t("beep.wav")),bell:new Audio(t("bell.wav")),interval:new Audio(t("interval.wav")),shoot:new Audio(t("shoot.wav"))},Object.values(this.sounds).forEach(n=>n.load())}play(t){const n=this.sounds[t];n&&(n.currentTime=0,n.play().catch(s=>console.error("Error al reproducir audio: ",s)))}}function l(e,t){const n=e.trim();if(n==="")return"00";const s=n.replace(/\D/g,"");if(s==="")return"00";let o=s.slice(0,t);return o.length===1&&(o=o.padStart(2,"0")),o}function w(e,t){e.addEventListener("input",()=>{e.value.length>t&&(e.value=e.value.slice(0,t))}),e.addEventListener("blur",()=>{e.value=l(e.value,t)})}function x(e,t,n){e.addEventListener("blur",()=>{let s=Number(e.value);isNaN(s)||s<t?e.value=l(String(t),2):s>n?e.value=l(String(n),2):e.value=l(String(s),2)})}function B(e,t){const n=Number(e.value),s=Number(t.value);n<59?e.value=l(String(n+1),2):s<99&&(t.value=l(String(s+1),2),e.value="00")}function k(e,t){const n=Number(e.value),s=Number(t.value);s>0?n===0?(t.value=l(String(s-1),2),e.value="59"):e.value=l(String(n-1),2):n>0&&(e.value=String(n-1).padStart(2,"0"))}const c=new H,{$setsInput:i,$workMinutesInput:$,$restMinutesInput:S,$restSecondsInput:p,$worksSecondsInput:g,$configDiv:A,$preparationDiv:M,$preparationText:D,$preparationTimmer:h,$countDiv:L,$countTitle:j,$countTimmer:O,$countSets:z,$exitBtn:m}=U;let u=null,v=!1,d=0,T="",b=null;i.addEventListener("keydown",e=>{["e","E","+","-","."].includes(e.key)&&e.preventDefault()});i.addEventListener("input",()=>{const e=i.value;e.length>2&&(i.value=e.slice(0,2))});w($,2);w(S,2);w(g,2);w(p,2);x(g,0,59);x(p,0,59);document.addEventListener("click",e=>{const t=e.target;if(t.matches("#set-increment")){const s=Number(i.value);s<99&&(i.value=String(s+1))}if(t.matches("#set-decrement")){const s=Number(i.value);s>1&&(i.value=String(s-1))}if(t.matches("#work-increment")&&B(g,$),t.matches("#rest-increment")&&B(p,S),t.matches("#rest-decrement")&&k(p,S),t.matches("#work-decrement")&&k(g,$),t.matches("#start-btn")){let s=function(){if(M.classList.add("hidden"),L.classList.remove("hidden"),f>y){console.log("TIMER COMPLETADO"),c.play("bell");return}console.log(`Starting set ${f} of ${y}`),z.textContent=`${y-f+1}`,_(r,a,"Work",()=>{console.log("REST"),c.play("interval"),_(C,N,"Rest",()=>{c.play("interval"),console.log(`Set ${f} completed`),f++,s()})})},o=5;c.play("beep");const r=Number($.value),a=Number(g.value),C=Number(S.value),N=Number(p.value),y=Number(i.value);console.log({workMinutes:r,workSeconds:a,restMinutes:C,restSeconds:N,sets:y}),A.classList.add("hidden"),M.classList.remove("hidden"),h.classList.remove("hidden"),h.textContent=String(o),D.classList.add("hidden");const R=setInterval(()=>{o>1?(c.play("beep"),console.log("Count:",o-1),h.textContent=String(o-1),o--):(c.play("shoot"),console.log("Go!"),h.classList.add("hidden"),D.classList.remove("hidden"),clearInterval(R),setTimeout(()=>{s()},1e3))},1e3);let f=1}const n=t.closest("#pause-btn");if(n){const[s,o]=n.querySelectorAll("svg");v=!v,s.classList.toggle("hidden"),o.classList.toggle("hidden"),v?L.style.opacity="0.6":L.style.opacity="1"}});let P=null,I=!1;m.addEventListener("mousedown",()=>{I=!0,m.classList.add("is-active"),P=setTimeout(()=>{I&&(m.classList.remove("is-active"),u&&clearInterval(u),v=!1,d=0,T="",b=null,L.classList.add("hidden"),A.classList.remove("hidden"),document.body.classList.remove("state-work","state-rest"))},2e3)});function q(){I=!1,m.classList.remove("is-active"),clearTimeout(P)}m.addEventListener("mouseup",q);m.addEventListener("mouseleave",q);function E(e){const t=Math.floor(e/60),n=e%60;return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`}function _(e,t,n,s){d=e*60+t,T=n,b=s,v=!1,j.textContent=n.toUpperCase(),document.body.classList.remove("state-work","state-rest"),n.toLowerCase()==="work"?document.body.classList.add("state-work"):n.toLowerCase()==="rest"&&document.body.classList.add("state-rest"),F()}function F(){u&&clearInterval(u),u=setInterval(()=>{v||(d>0?(console.log(`${T} Time: ${E(d)}`),O.textContent=E(d),d--):(O.textContent=E(0),clearInterval(u),b&&b()))},1e3)}
